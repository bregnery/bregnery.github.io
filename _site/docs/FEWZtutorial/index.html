<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>FEWZ Tutorial</title>
    <meta name="description" content="FEWZ: Fully Exclusize W and Z Production">


    <link rel="stylesheet" href="/css/main.css">
    <link rel="stylesheet" href="/css/font-awesome.min.css">

    <link rel="shortcut icon" href="/favicon.ico?1">
    <!-- Begin Jekyll SEO tag v2.2.2 -->
<title>FEWZ Tutorial | Brendan Regnery</title>
<meta property="og:title" content="FEWZ Tutorial" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="FEWZ: Fully Exclusize W and Z Production" />
<meta property="og:description" content="FEWZ: Fully Exclusize W and Z Production" />
<link rel="canonical" href="http://localhost:4000/docs/FEWZtutorial/" />
<meta property="og:url" content="http://localhost:4000/docs/FEWZtutorial/" />
<meta property="og:site_name" content="Brendan Regnery" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2018-07-13T21:35:49+02:00" />
<script type="application/ld+json">
{"@context":"http://schema.org","@type":"WebPage","headline":"FEWZ Tutorial","datePublished":"2018-07-13T21:35:49+02:00","dateModified":"2018-07-13T21:35:49+02:00","description":"FEWZ: Fully Exclusize W and Z Production","url":"http://localhost:4000/docs/FEWZtutorial/"}</script>
<!-- End Jekyll SEO tag -->


    <link rel="canonical" href="http://localhost:4000/docs/FEWZtutorial/">
    <link rel="alternate" type="application/rss+xml" title="Brendan Regnery" href="http://localhost:4000/feed.xml" />
</head>


<body>

    <nav class="navbar navbar-default navbar-fixed-top">
    <div class="container navbar-container">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
            <a class="navbar-brand" href="/">
                <span><img src="/img/logonav.png"></span> Brendan Regnery
            </a>
        </div>
        <div id="navbar" class="collapse navbar-collapse">
            <ul class="nav navbar-nav">
                <li  class="active" ><a href="/docs/home/">Research</a></li>
                <li ><a href="/blog/2017/05/03/jekyll-doc-theme/">Blog</a></li>
            </ul>
            <div class="navbar-right">
                <form class="navbar-form navbar-left">
                    <div class="form-group has-feedback">
                        <input id="search-box" type="text" class="form-control" placeholder="Search...">
                        <i class="fa fa-search form-control-feedback"></i>
                    </div>
                </form>
                <ul class="nav navbar-nav">
                    <li><a href="https://github.com/bregnery/bregnery.github.io"><i class="fa fa-github" aria-hidden="true"></i></a></li>
                </ul>
            </div>
        </div>
    </div>
</nav>


    <div class="page-content">
        <div class="wrapper">
            <div class="container">
    <div class="row">
        <div class="col-md-4">
          <div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true">

  <div class="panel panel-default">
    <div class="panel-heading">
      <h4 class="panel-title">
        <a role="button" data-toggle="collapse" data-parent="#accordion" href="#collapse-1" aria-expanded="false" aria-controls="collapse-1">
          My Research
        </a>
      </h4>
    </div>
    <div id="collapse-1" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingOne">
      <ul class="list-group">
        
          
          
          <a class="list-group-item " href="/docs/home/">Introduction</a>
        
      </ul>
    </div>
  </div>

  <div class="panel panel-default">
    <div class="panel-heading">
      <h4 class="panel-title">
        <a role="button" data-toggle="collapse" data-parent="#accordion" href="#collapse-2" aria-expanded="false" aria-controls="collapse-2">
          Tutorials
        </a>
      </h4>
    </div>
    <div id="collapse-2" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingOne">
      <ul class="list-group">
        
          
          
          <a class="list-group-item " href="/docs/MonteCarloProduction2016/">Monte Carlo Production with the 2016 CMS Scheme</a>
        
          
          
          <a class="list-group-item active" href="/docs/FEWZtutorial/">FEWZ Tutorial</a>
        
      </ul>
    </div>
  </div>

  <div class="panel panel-default">
    <div class="panel-heading">
      <h4 class="panel-title">
        <a role="button" data-toggle="collapse" data-parent="#accordion" href="#collapse-3" aria-expanded="false" aria-controls="collapse-3">
          Resources
        </a>
      </h4>
    </div>
    <div id="collapse-3" class="panel-collapse collapse" role="tabpanel" aria-labelledby="headingOne">
      <ul class="list-group">
        
          
          
          <a class="list-group-item " href="/docs/monteCarloProduction/">Resources for CMS Monte Carlo Production</a>
        
      </ul>
    </div>
  </div>

</div>

        </div>

        <div class="col-md-8">
            <h1>FEWZ Tutorial</h1>
            <div id="markdown-content-container"><h1 id="fewz-fully-exclusize-w-and-z-production">FEWZ: Fully Exclusize W and Z Production</h1>

<h2 id="introduction">Introduction</h2>

<p><a href="http://gate.hep.anl.gov/fpetriello/FEWZ.html">FEWZ</a> is a fortran-based Vegas simulator for calculating leading order (LO), next-to-leading order (NLO), and next-next-leading order (NNLO)
Drell-Yan processes [1]. In the past, I used this to calculate the background Drell-Yan shape for the Higgs to dimuons search.</p>

<h2 id="instructions">Instructions</h2>

<p>All of the files necessary for compiling and using FEWZ are contained in my <a href="https://github.com/bregnery/FEWZforHiggs2mumu">GitHub Repository</a>,
so first clone this repository. Please note that these are the files for the tutorial, an up-to-date version can be found on the
<a href="http://gate.hep.anl.gov/fpetriello/FEWZ.html">FEWZ website</a>.</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code>git clone https://github.com/bregnery/FEWZforHiggs2mumu.git
</code></pre>
</div>

<h3 id="installation">Installation</h3>

<p>These installation instructions are from <a href="http://gate.hep.anl.gov/fpetriello/FEWZ.html">FEWZ</a> [1]. 
Please note that you do not need to use Condor for submission, a shell submission
script can be easily written for other systems. I included an example near the end of this tutorial.</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code><span class="nb">cd </span>FEWZforHiggs2mumu/FEWZ/FEWZ_3.1.b2/
make fewz <span class="c"># makes local executable</span>
make condor_fewz <span class="c"># makes executable for Condor systems</span>
make <span class="c"># makes both, an error will be thrown if you do not have Condor installed</span>
</code></pre>
</div>

<p>All makes will compile the necessary CUBA library provided automatically</p>

<h3 id="running-locally">Running Locally</h3>

<p>In order to run the FEWZ program, first change into the FEWZ bin directory. Then copy the input.txt 
and histograms.txt from the desired directory to the bin directory. Now run the local version of 
FEWZ in the bin by using the shell script local_run.sh with the following command</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code>./local_run.sh z &lt;run_dir&gt; input.txt histograms.txt results.dat .. &lt;number_of_processors&gt;
</code></pre>
</div>

<p>The <code class="highlighter-rouge">run_dir</code> is a directory created in order to store information from the run. The default <code class="highlighter-rouge">number_of_processors</code> is one.</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code>./finish.sh &lt;run_dir&gt; &lt;order_prefix&gt;.&lt;name_of_results_file&gt;.dat
</code></pre>
</div>

<p>The possible order prefixes are LO, NLO, and NNLO.</p>

<h2 id="organization">Organization</h2>

<p>The <code class="highlighter-rouge">input.txt</code> file contains the adjustable parameters about the process being simulated. For example: the collision energy,
particle masses, pT and eta ranges for different particles, PDF information, and particle couplings. The <code class="highlighter-rouge">histogram.txt</code> file 
contains bounds and bins for the values that are calculated by FEWZ. The output will be stored in <code class="highlighter-rouge">.dat</code> files.</p>

<p>For some examples, click <a href="https://github.com/bregnery/FEWZforHiggs2mumu/tree/master/FEWZ/FEWZ_3.1.b2/bin">here</a>. The files 
labeled <code class="highlighter-rouge">mu13tev-higgs*.txt</code> contain parameters used to calculate the Drell-Yan background for various mass ranges at 
CMS with collision energies of 13TeV. These files also use the LHAPDF set which are included in this repository [2].</p>

<h2 id="example-running-on-the-hipergator">Example Running on the HiPerGator</h2>

<p>This is an example for running FEWZ on a server that uses SLURM (Simple Linux Utility for Resource Management).
First, load the necessary modules and enter development mode of the University of Floridaâ€™s HiPerGator 2.0.</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code>module load ufrc
module load gcc
srundev --time<span class="o">=</span>04:00:00
</code></pre>
</div>

<p>The submit script used in this example is <code class="highlighter-rouge">FEWZforHiggs2mumu/FEWZ/FEWZ_3.1.b2/bin/dy_nlo_submit.sh</code>. Now, use this to submit
to the HiPerGator (or other SLURM system).</p>

<div class="language-bash highlighter-rouge"><pre class="highlight"><code>sbatch dy_nlo_submit.sh
squeue -u &lt;username&gt;
</code></pre>
</div>

<p>More information about the University of Floridaâ€™s HiPerGator can be found the <a href="https://help.rc.ufl.edu/doc/UFRC_Help_and_Documentation">UFRC Wiki</a>.</p>

<h2 id="remarks">Remarks</h2>

<p>FEWZ is a useful tool for calculating backgrounds; other programs can be used to fit the shape of these backgrounds. In the
search for Higgs to dimuons, we used FEWZ to calculate our Drell-Yan background and found a function to fit the background shape 
for the dimuon invariant mass. To see this in further detail, please see appendix A in our <a href="http://cms.cern.ch/iCMS/jsp/db_notes/noteInfo.jsp?cmsnoteid=CMS%20AN-2017/098">CMS analysis note</a></p>

<p>For an example fitting program, please see my 
<a href="https://github.com/bregnery/PythonModulesForCMSfits/tree/master/example/FEWZstudies">python modules repository</a></p>

<h2 id="references">References</h2>

<ol>
  <li>R. Gavin, Y. Li, F. Petriello, and S. Quackenbush, Comput. Phys. Commun. <strong>182</strong>, 2388-2403 (2011)</li>
  <li>A. Buckley, J. Ferrando, S. Lloyd, K. Nordstrom, B. Page, M. Rufenacht, M. Schonerr, and G. Watt, Eur. Phys. J. <strong>C75</strong>, 132 (2015)</li>
</ol>
</div>
            <p class="text-center">
              <br />
              <a target="_blank" href="https://github.com/bregnery/bregnery.github.io/blob/gh-pages/_docs/tutorials/FEWZtutorial.md" class="btn btn-default githubEditButton" role="button">
                <i class="fa fa-pencil fa-lg"></i> Improve this page
              </a>
            </p>
            <hr>
            





  
  

  
  

  
  
    <ul class="pager">
      
        
        
        <li class="previous">
          <a href="/docs/MonteCarloProduction2016/">
            <span aria-hidden="true">&larr;</span> Previous
          </a>
        </li>
      

      
        
        
        <li class="next">
          <a href="/docs/monteCarloProduction/">
            Next <span aria-hidden="true">&rarr;</span>
          </a>
        </li>
      
    </div>
    <div class="clear"></div>
    

        </div>

    </div>
</div>

        </div>
    </div>

    <footer class="footer">
    <div class="container">

        <p class="text-center">
            Brendan Regnery 2018 |
            Powered by <a href="https://github.com/aksakalli/jekyll-doc-theme">Jekyll Doc Theme</a>
        </p>
        <!-- <p class="text-muted">Place sticky footer content here.</p> -->
    </div>
</footer>

    <script>
  var baseurl = ''
</script>
<script src="//code.jquery.com/jquery-1.10.2.min.js"></script>
<script src="/js/bootstrap.min.js "></script>
<script src="/js/typeahead.bundle.min.js "></script>

<script src="/js/main.js "></script>

</body>

</html>
